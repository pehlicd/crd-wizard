(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{288:(e,s,r)=>{"use strict";r.d(s,{CrdProvider:()=>i,q:()=>o});var t=r(95155),a=r(12115),l=r(26549),n=r(15894);let d=(0,a.createContext)(void 0);function i(e){let{children:s}=e,[r,i]=(0,a.useState)([]),[o,c]=(0,a.useState)(""),[m,x]=(0,a.useState)([]),[u,h]=(0,a.useState)(null),[p,f]=(0,a.useState)(!0),{toast:b}=(0,n.dj)();(0,a.useEffect)(()=>{{let e=localStorage.getItem("crd-wizard-cluster");e&&c(e)}},[]);let g=(0,a.useCallback)(e=>{c(e),localStorage.setItem("crd-wizard-cluster",e)},[]),j=(0,a.useCallback)(()=>{let e={};return o&&(e["X-Cluster-Name"]=o),e},[o]),N=(0,a.useCallback)(async()=>{try{let e=await fetch("".concat(l.J,"/api/clusters"),{cache:"no-store"});if(!e.ok)throw Error("Failed to fetch clusters: ".concat(e.status));let s=await e.json();i(s||[]);{let e=localStorage.getItem("crd-wizard-cluster");if(e&&s.some(s=>s.name===e))o!==e&&c(e);else{let e=s.find(e=>e.isCurrent);e?(c(e.name),localStorage.setItem("crd-wizard-cluster",e.name)):s.length>0&&!o&&(c(s[0].name),localStorage.setItem("crd-wizard-cluster",s[0].name))}}}catch(e){console.error("Failed to fetch clusters:",e)}},[o]),w=(0,a.useCallback)(async()=>{f(!0);try{let e=j(),s=await fetch("".concat(l.J,"/api/crds"),{cache:"no-store",headers:e});if(!s.ok){let e=await s.text();throw Error("Failed to fetch CRDs from server: ".concat(s.status," ").concat(e))}let r=(await s.json()||[]).map(e=>({...e,id:e.metadata.name}));x(r)}catch(e){console.error(e),b({variant:"destructive",title:"Error fetching data",description:e.message||"Could not load CRDs. Please ensure the backend is running and reachable."})}finally{f(!1)}},[j,b]),v=(0,a.useCallback)(async()=>{try{let e=j(),s=await fetch("".concat(l.J,"/api/cluster-info"),{cache:"no-store",headers:e});if(!s.ok){let e=await s.text();throw Error("Failed to fetch cluster info from server: ".concat(s.status," ").concat(e))}let r=await s.json();h(r||null)}catch(e){console.error(e),b({variant:"destructive",title:"Error fetching cluster info",description:e.message||"Could not load cluster info. Please ensure the backend is running and reachable."}),h(null)}},[j,b]);return(0,a.useEffect)(()=>{N()},[N]),(0,a.useEffect)(()=>{o&&(w(),v())},[o,w,v]),(0,t.jsx)(d.Provider,{value:{clusters:r,selectedCluster:o,allCrds:m,clusterInfo:u,isLoading:p,selectCluster:g,refreshCrds:w},children:s})}function o(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useCrdContext must be used within a CrdProvider");return e}},11647:(e,s,r)=>{"use strict";r.d(s,{E:()=>d});var t=r(95155);r(12115);var a=r(83101),l=r(64269);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:s,variant:r,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:r}),s),...a})}},17037:(e,s,r)=>{"use strict";r.d(s,{F:()=>d});var t=r(95155),a=r(12115),l=r(59034),n=r(64269);let d=a.forwardRef((e,s)=>{let{className:r,children:a,...d}=e;return(0,t.jsxs)(l.bL,{ref:s,className:(0,n.cn)("relative overflow-hidden",r),...d,children:[(0,t.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,t.jsx)(i,{}),(0,t.jsx)(l.OK,{})]})});d.displayName=l.bL.displayName;let i=a.forwardRef((e,s)=>{let{className:r,orientation:a="vertical",...d}=e;return(0,t.jsx)(l.VM,{ref:s,orientation:a,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...d,children:(0,t.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})})});i.displayName=l.VM.displayName},20243:(e,s,r)=>{"use strict";r.d(s,{E:()=>l});var t=r(95155),a=r(64269);function l(e){let{className:s,...r}=e;return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",s),...r})}},26549:(e,s,r)=>{"use strict";r.d(s,{J:()=>t});let t=r(95704).env.NEXT_PUBLIC_API_BASE_URL||""},34236:(e,s,r)=>{Promise.resolve().then(r.bind(r,90991))},90991:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>el});var t=r(95155),a=r(12115),l=r(65142),n=r(17037),d=r(86948),i=r(86651),o=r(35299),c=r(39867),m=r(71613),x=r(6259),u=r(64269),h=r(3998),p=r(20243),f=r(11647),b=r(288);function g(e){let{crds:s,searchTerm:r,setSearchTerm:g,selectedCrd:j,onCrdSelect:N,isLoading:w}=e,{selectedCluster:v}=(0,b.q)(),[y,k]=(0,a.useState)(!1),C=async e=>{k(!0);try{let s={};v&&(s["X-Cluster-Name"]=v);let r=await fetch("/api/export-all?format=".concat(e),{headers:s});if(!r.ok)return void console.error("Failed to export all CRDs");let t=await r.blob(),a=window.URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download="crd_docs_".concat(new Date().toISOString().slice(0,19).replace(/[:-]/g,""),".zip"),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(a)}catch(e){console.error("Export failed:",e)}finally{k(!1)}},E=async(e,s,r)=>{e.stopPropagation();let t="/api/export?crdName=".concat(s,"&format=").concat(r),a={};v&&(a["X-Cluster-Name"]=v);let l=await fetch(t,{headers:a});if(!l.ok)return void console.error("Failed to export CRD");let n=await l.blob(),d=window.URL.createObjectURL(n),i=document.createElement("a");i.href=d,i.download="".concat(s,".").concat("markdown"===r?"md":"html"),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(d)};return(0,t.jsxs)("div",{className:"h-full flex flex-col w-full bg-background border-r border-border/50",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-border/30 bg-background/50 backdrop-blur-sm z-10 sticky top-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative group flex-1",children:[(0,t.jsx)(i.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-focus-within:text-primary transition-colors"}),(0,t.jsx)(l.p,{type:"search",placeholder:"Search CRDs...",className:"pl-9 w-full bg-background/60 border-border/40 focus:border-primary/50 focus:bg-background transition-all duration-200 text-sm",value:r,onChange:e=>g(e.target.value),disabled:w})]}),(0,t.jsxs)(x.rI,{children:[(0,t.jsx)(x.ty,{asChild:!0,children:(0,t.jsx)(h.$,{variant:"outline",size:"icon",className:"h-9 w-9 shrink-0",disabled:y||w||0===s.length,title:"Export All",children:y?(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(c.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(x.SQ,{align:"end",children:[(0,t.jsx)(x._2,{onClick:()=>C("html"),children:"Export All as HTML (ZIP)"}),(0,t.jsx)(x._2,{onClick:()=>C("markdown"),children:"Export All as Markdown (ZIP)"})]})]})]}),r&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2 animate-fade-in pl-1",children:w?"Searching...":"".concat(s.length," result").concat(1===s.length?"":"s")})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 w-full",children:(0,t.jsx)(n.F,{className:"h-full w-full",children:(0,t.jsx)("div",{className:"p-3 md:p-4 space-y-3 pb-6",children:w?Array.from({length:8}).map((e,s)=>(0,t.jsx)(d.Zp,{className:"bg-card/60 border-border/30 animate-pulse",children:(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(p.E,{className:"h-9 w-9 rounded-lg flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2 min-w-0",children:[(0,t.jsx)(p.E,{className:"h-4 w-2/3"}),(0,t.jsx)(p.E,{className:"h-3 w-full"})]})]})})},s)):s.length>0?s.map((e,s)=>(0,t.jsx)(d.Zp,{onClick:()=>N(e),className:(0,u.cn)("group cursor-pointer transition-all duration-200 hover:shadow-lg hover:shadow-primary/5 active:scale-[0.99]","border bg-card/70 backdrop-blur-sm hover:bg-card/90",(null==j?void 0:j.id)===e.id?"border-primary/60 bg-primary/10 shadow-md ring-1 ring-primary/20":"border-border/40 hover:border-primary/40","animate-fade-in w-full"),style:{animationDelay:"".concat(Math.min(40*s,500),"ms")},children:(0,t.jsx)("div",{className:"p-3 md:p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:(0,u.cn)("flex-shrink-0 p-2 rounded-lg transition-all duration-200 mt-1",(null==j?void 0:j.id)===e.id?"bg-primary/20 text-primary":"bg-muted/60 text-muted-foreground group-hover:bg-primary/15 group-hover:text-primary"),children:(0,t.jsx)(m.A,{className:"h-5 w-5"})}),(0,t.jsx)("div",{className:"flex-1 min-w-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1 flex flex-col",children:[(0,t.jsx)(d.ZB,{className:"text-sm font-semibold text-foreground group-hover:text-primary transition-colors mb-1.5 leading-tight truncate",children:e.spec.names.kind}),(0,t.jsx)(d.BT,{className:"text-xs text-muted-foreground leading-tight mb-1.5 break-all line-clamp-2",children:e.metadata.name}),e.spec.group&&(0,t.jsx)(d.BT,{className:"text-[10px] text-muted-foreground/70 leading-tight font-mono truncate bg-muted/30 px-1 py-0.5 rounded w-fit max-w-full",children:e.spec.group})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1.5 flex-shrink-0 ml-1",children:["number"==typeof e.instanceCount&&(0,t.jsx)(f.E,{variant:e.instanceCount>0?"default":"secondary",className:(0,u.cn)("text-[10px] font-medium h-5 px-1.5 min-w-[20px] justify-center",e.instanceCount>0?"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800":"bg-slate-100 text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"),children:e.instanceCount}),(0,t.jsx)(f.E,{variant:"outline",className:"text-[10px] bg-background/60 border-border/60 font-medium h-5 px-1.5",children:e.spec.scope}),(0,t.jsxs)(x.rI,{children:[(0,t.jsx)(x.ty,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,t.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-primary z-10",title:"Export",children:(0,t.jsx)(c.A,{className:"h-3.5 w-3.5"})})}),(0,t.jsxs)(x.SQ,{align:"end",children:[(0,t.jsx)(x._2,{onClick:s=>E(s,e.metadata.name,"html"),children:"Export as HTML"}),(0,t.jsx)(x._2,{onClick:s=>E(s,e.metadata.name,"markdown"),children:"Export as Markdown"})]})]})]})]})})]})})},e.id)):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-center py-12 px-4 w-full",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-muted/20 rounded-2xl flex items-center justify-center mb-4",children:(0,t.jsx)(m.A,{className:"h-8 w-8 text-muted-foreground/50"})}),(0,t.jsx)("h3",{className:"font-semibold text-foreground mb-2 text-sm",children:"No CRDs found"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground max-w-[200px] leading-relaxed",children:r?'No matches for "'.concat(r,'"'):"No Custom Resource Definitions available."})]})})})})]})}var j=r(49308),N=r(58609),w=r(24033);let v=N.bL,y=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(N.q7,{ref:s,className:(0,u.cn)("border-b",r),...a})});y.displayName="AccordionItem";let k=a.forwardRef((e,s)=>{let{className:r,children:a,...l}=e;return(0,t.jsx)(N.Y9,{className:"flex",children:(0,t.jsxs)(N.l9,{ref:s,className:(0,u.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),...l,children:[a,(0,t.jsx)(w.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});k.displayName=N.l9.displayName;let C=a.forwardRef((e,s)=>{let{className:r,children:a,...l}=e;return(0,t.jsx)(N.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,t.jsx)("div",{className:(0,u.cn)("pb-4 pt-0",r),children:a})})});C.displayName=N.UC.displayName;var E=r(57259);let A=E.bL,S=E.R6,R=E.Ke;var L=r(16140),I=r(27937),z=r(18154),D=r(71155),F=r(78192),$=r(79397),O=r(90368),U=r(95740),P=r(30940),_=r(39068),T=r(26617),V=r(52056);let Z=e=>({string:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800",number:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-800",integer:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-800",boolean:"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-300 dark:border-orange-800",object:"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-800",array:"bg-pink-100 text-pink-800 border-pink-200 dark:bg-pink-900/30 dark:text-pink-300 dark:border-pink-800"})[e]||"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700",q=e=>{let{schema:s}=e;if(!s||!s.properties)return(0,t.jsxs)("div",{className:"text-center py-8 px-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-muted/50 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(L.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No schema definition available for this version."})]});let r=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,t.jsx)("div",{className:"flex flex-col gap-2 w-full min-w-0",children:Object.entries(e).map(e=>{let[l,n]=e,d=n.properties||n.items&&n.items.properties,i=s.required&&s.required.includes(l);return d?(0,t.jsxs)(A,{defaultOpen:a<2,className:"w-full min-w-0",children:[(0,t.jsxs)(S,{className:"flex items-start gap-2 text-left w-full group py-3 px-2 md:px-4 rounded-lg bg-background/50 hover:bg-background/80 transition-colors border border-border/50",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 shrink-0 mt-1 transform transition-transform duration-200 group-data-[state=open]:rotate-90 text-muted-foreground"}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 md:gap-2",children:[(0,t.jsxs)("span",{className:(0,u.cn)("font-mono font-medium text-foreground break-all text-sm md:text-base",i&&"text-orange-600 dark:text-orange-400"),children:[l,i&&(0,t.jsx)("span",{className:"text-orange-500 ml-1",children:"*"})]}),(0,t.jsx)(f.E,{className:(0,u.cn)("text-[10px] md:text-xs font-medium border shrink-0 px-1.5 h-5 md:h-6",Z(n.type)),children:n.type}),n.format&&(0,t.jsx)(f.E,{variant:"outline",className:"text-[10px] md:text-xs font-mono shrink-0 px-1.5 h-5 md:h-6",children:n.format})]})})]}),n.description&&(0,t.jsx)("div",{className:"px-3 md:px-4 pt-2 w-full min-w-0",children:(0,t.jsx)("p",{className:"text-muted-foreground text-xs md:text-sm pl-4 md:pl-7 break-words whitespace-pre-wrap leading-relaxed",children:n.description})}),(0,t.jsx)(R,{className:(0,u.cn)("pt-2 w-full min-w-0",0===a?"pl-1 md:pl-4":""),children:(0,t.jsx)("div",{className:a>0?a<4?"border-l-2 border-primary/10 pl-2 md:pl-4 ml-1 md:ml-2":"border-l-2 border-primary/10 pl-2 ml-1":"",children:(0,t.jsxs)("div",{className:"space-y-2",children:[n.properties&&r(n.properties,a+1),n.items&&n.items.properties&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs md:text-sm text-muted-foreground italic font-medium px-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/50 rounded-full shrink-0"}),"Array items:"]}),r(n.items.properties,a+1)]})]})})})]},l):(0,t.jsxs)("div",{className:"py-2 md:py-3 px-2 md:px-4 bg-background/30 rounded-lg border border-border/30 w-full min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 md:gap-2 w-full",children:[(0,t.jsxs)("span",{className:(0,u.cn)("font-mono font-medium text-foreground break-all text-sm md:text-base",i&&"text-orange-600 dark:text-orange-400"),children:[l,i&&(0,t.jsx)("span",{className:"text-orange-500 ml-1",children:"*"})]}),(0,t.jsx)(f.E,{className:(0,u.cn)("text-[10px] md:text-xs font-medium border shrink-0 px-1.5 h-5 md:h-6",Z(n.type)),children:n.type}),n.format&&(0,t.jsx)(f.E,{variant:"outline",className:"text-[10px] md:text-xs font-mono shrink-0 px-1.5 h-5 md:h-6",children:n.format}),n.enum&&(0,t.jsx)(f.E,{variant:"outline",className:"text-[10px] md:text-xs shrink-0 px-1.5 h-5 md:h-6",children:"enum"})]}),n.description&&(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-xs md:text-sm whitespace-pre-wrap break-words leading-relaxed w-full",children:n.description}),n.enum&&(0,t.jsxs)("div",{className:"mt-2 w-full min-w-0",children:[(0,t.jsx)("p",{className:"text-[10px] md:text-xs text-muted-foreground mb-1",children:"Allowed values:"}),(0,t.jsx)("div",{className:"flex gap-1 flex-wrap",children:n.enum.map((e,s)=>(0,t.jsx)(f.E,{variant:"outline",className:"text-[10px] md:text-xs font-mono break-all max-w-full whitespace-normal",children:String(e)},s))})]}),void 0!==n.default&&(0,t.jsxs)("div",{className:"mt-2 w-full min-w-0",children:[(0,t.jsx)("p",{className:"text-[10px] md:text-xs text-muted-foreground mb-1",children:"Default:"}),(0,t.jsx)(f.E,{variant:"outline",className:"text-[10px] md:text-xs font-mono bg-muted/50 break-all whitespace-normal",children:""===n.default?(0,t.jsx)("span",{className:"text-muted-foreground",children:'""'}):String(n.default)})]})]},l)})})};return(0,t.jsx)("div",{className:"p-1 w-full min-w-0 overflow-hidden",children:r(s.properties)})},B=e=>{let{line:s}=e,r=s,a="",l=s.indexOf("#");-1!==l&&(r=s.substring(0,l),a=s.substring(l));let n=e=>{if(!e)return null;let s=e.trim();return/^-?\d+(\.\d+)?$/.test(s)?(0,t.jsx)("span",{className:"text-violet-300",children:e}):/^(true|false|null)$/.test(s)?(0,t.jsx)("span",{className:"text-amber-300",children:e}):/^".*"$/.test(s)||/^'.*'$/.test(s)?(0,t.jsx)("span",{className:"text-emerald-300",children:e}):(0,t.jsx)("span",{className:"text-slate-200",children:e})},d=r.match(/^(\s*)([\w\.\-/"']+)(:\s*)(.*)$/);if(d){let[,e,s,r,l]=d;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:e}),(0,t.jsx)("span",{className:"text-sky-300",children:s}),(0,t.jsx)("span",{className:"text-slate-400",children:r}),n(l),a&&(0,t.jsx)("span",{className:"text-slate-500 italic",children:a})]})}let i=r.match(/^(\s*)(-\s+)(.*)$/);if(i){let[,e,s,r]=i,l=r.match(/^([\w\.\-/"']+)(:\s*)(.*)$/);if(l){let[,r,d,i]=l;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:e}),(0,t.jsx)("span",{className:"text-slate-400",children:s}),(0,t.jsx)("span",{className:"text-sky-300",children:r}),(0,t.jsx)("span",{className:"text-slate-400",children:d}),n(i),a&&(0,t.jsx)("span",{className:"text-slate-500 italic",children:a})]})}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:e}),(0,t.jsx)("span",{className:"text-slate-400",children:s}),n(r),a&&(0,t.jsx)("span",{className:"text-slate-500 italic",children:a})]})}return(0,t.jsxs)(t.Fragment,{children:[n(r),a&&(0,t.jsx)("span",{className:"text-slate-500 italic",children:a})]})},J=e=>{let{language:s,code:r}=e,[l,n]=(0,a.useState)(!1),d=r.replace(/&#039;/g,"'").replace(/&#39;/g,"'").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return(0,t.jsxs)("div",{className:"my-4 rounded-md border border-border/60 bg-slate-950 dark:bg-slate-950/50 overflow-hidden w-full max-w-full shadow-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center bg-slate-900/50 border-b border-border/10 px-4 py-1.5",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-slate-400 font-mono",children:s||"code"}),(0,t.jsxs)(h.$,{onClick:()=>{let e=document.createElement("textarea");e.value=d,e.style.position="fixed",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e),e.select();try{document.execCommand("copy"),n(!0),setTimeout(()=>n(!1),2e3)}catch(e){console.error("Failed to copy: ",e)}document.body.removeChild(e)},variant:"ghost",size:"sm",className:"flex items-center gap-1.5 h-7 px-2 text-slate-400 hover:text-slate-100 hover:bg-slate-800",children:[l?(0,t.jsx)(z.A,{className:"h-3.5 w-3.5 text-emerald-500"}):(0,t.jsx)(D.A,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{className:"text-xs",children:l?"Copied":"Copy"})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto p-4",children:(0,t.jsx)("pre",{className:"text-sm font-mono text-slate-200 whitespace-pre-wrap break-all leading-relaxed",children:(0,t.jsx)("code",{children:d.split("\n").map((e,s)=>(0,t.jsx)("div",{children:(0,t.jsx)(B,{line:e})},s))})})})]})},M=e=>{let{response:s}=e;return(0,t.jsxs)("div",{className:"rounded-lg border border-primary/20 bg-primary/5 p-4 md:p-6 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-primary font-semibold text-sm uppercase tracking-wider",children:[(0,t.jsx)(F.A,{className:"h-4 w-4"}),"AI Analysis"]}),(0,t.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none w-full break-words overflow-hidden text-foreground/90",children:(0,t.jsx)(j.oz,{components:{h1:e=>{let{node:s,...r}=e;return(0,t.jsx)("h1",{className:"text-xl font-bold mt-6 mb-3 text-foreground tracking-tight",...r})},h2:e=>{let{node:s,...r}=e;return(0,t.jsx)("h2",{className:"text-lg font-semibold mt-5 mb-3 text-foreground border-b border-border/40 pb-1",...r})},h3:e=>{let{node:s,...r}=e;return(0,t.jsx)("h3",{className:"text-base font-semibold mt-4 mb-2 text-foreground",...r})},p:e=>{let{node:s,...r}=e;return(0,t.jsx)("p",{className:"mb-3 leading-relaxed whitespace-pre-wrap",...r})},ul:e=>{let{node:s,...r}=e;return(0,t.jsx)("ul",{className:"list-disc pl-5 mb-3 space-y-1 marker:text-primary/70",...r})},ol:e=>{let{node:s,...r}=e;return(0,t.jsx)("ol",{className:"list-decimal pl-5 mb-3 space-y-1 marker:text-primary/70",...r})},li:e=>{let{node:s,...r}=e;return(0,t.jsx)("li",{className:"pl-1",...r})},blockquote:e=>{let{node:s,...r}=e;return(0,t.jsx)("blockquote",{className:"border-l-4 border-primary/30 pl-4 italic my-4 text-muted-foreground bg-background/50 py-2 pr-2 rounded-r",...r})},a:e=>{let{node:s,...r}=e;return(0,t.jsx)("a",{className:"text-primary hover:underline font-medium decoration-primary/30 underline-offset-4",...r})},table:e=>{let{node:s,...r}=e;return(0,t.jsx)("div",{className:"overflow-x-auto w-full my-4 rounded-md border border-border/50 bg-background/50",children:(0,t.jsx)("table",{className:"w-full text-sm text-left",...r})})},thead:e=>{let{node:s,...r}=e;return(0,t.jsx)("thead",{className:"bg-muted/50 border-b border-border/50",...r})},th:e=>{let{node:s,...r}=e;return(0,t.jsx)("th",{className:"px-4 py-2 font-medium text-muted-foreground",...r})},td:e=>{let{node:s,...r}=e;return(0,t.jsx)("td",{className:"px-4 py-2 border-b border-border/50 last:border-0",...r})},code(e){let{inline:s,className:r,children:a,...l}=e,n=String(null!=a?a:""),d=/language-(\w+)/.exec(r||"");if(s)return(0,t.jsx)("code",{className:"font-mono bg-muted/80 px-1.5 py-0.5 rounded text-xs md:text-sm text-foreground break-all border border-border/50",...l,children:a});let i=d&&d[1],o=n.includes("\n");return i||o?(0,t.jsx)(J,{language:i?d[1]:"",code:n.replace(/\n$/,"")}):(0,t.jsx)("code",{className:"font-mono bg-muted/80 px-1.5 py-0.5 rounded text-xs md:text-sm text-foreground break-all border border-border/50",...l,children:a})}},children:s})})]})};function X(e){var s;let{crd:r,onBack:l,selectedCluster:i}=e,[c,m]=(0,a.useState)({}),[x,p]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("","/api/status"));if(e.ok){let s=await e.json();p(s.aiEnabled)}else console.error("Failed to fetch AI status, disabling AI features."),p(!1)}catch(e){console.error("Error connecting to API, disabling AI features.",e),p(!1)}})()},[]),!r)return(0,t.jsx)("div",{className:"flex items-center justify-center h-full bg-background p-4",children:(0,t.jsxs)("div",{className:"text-center text-muted-foreground max-w-sm",children:[(0,t.jsx)($.A,{className:"h-12 w-12 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-medium mb-2",children:"No CRD Selected"}),(0,t.jsx)("p",{className:"text-sm",children:"Select a Custom Resource Definition from the list to see its details."})]})});let b=c[r.metadata.name]||{response:null,isLoading:!1,error:null},g=r.spec.versions.find(e=>e.storage)||r.spec.versions[0],j=async()=>{let e=r.metadata.name;m(s=>({...s,[e]:{response:null,isLoading:!0,error:null}}));try{var s;let t=JSON.stringify((null==(s=g.schema)?void 0:s.openAPIV3Schema)||{}),a={"Content-Type":"application/json"};i&&(a["X-Cluster-Name"]=i);let l=await fetch("".concat("","/api/crd/generate-context"),{method:"POST",headers:a,body:JSON.stringify({group:r.spec.group,version:g.name,kind:r.spec.names.kind,schemaJSON:t})});if(!l.ok){let e=await l.text();throw Error("Failed to generate context: ".concat(l.status," ").concat(e))}let n=await l.text();m(s=>({...s,[e]:{response:n,isLoading:!1,error:null}}))}catch(s){m(r=>({...r,[e]:{response:null,isLoading:!1,error:s.message||"An unknown error occurred."}}))}};return(0,t.jsx)(n.F,{className:"h-full bg-background w-full",children:(0,t.jsx)("div",{className:"flex flex-col min-h-full w-[0px] min-w-full",children:(0,t.jsx)("div",{className:"p-3 md:p-6 max-w-full flex-1 w-full",children:(0,t.jsxs)(d.Zp,{className:"overflow-hidden shadow-sm w-full border-border/60",children:[(0,t.jsxs)(d.aR,{className:"bg-card border-b border-border space-y-3 md:space-y-1.5 p-4 md:p-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[l&&(0,t.jsxs)(h.$,{variant:"ghost",size:"icon",onClick:l,className:"md:hidden -ml-2 shrink-0 h-8 w-8",children:[(0,t.jsx)(O.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Back"})]}),(0,t.jsxs)(d.ZB,{className:"flex-1 flex items-center gap-2 md:gap-3 font-headline text-lg md:text-2xl min-w-0 w-full md:w-auto",children:[(0,t.jsx)(L.A,{className:"h-5 w-5 md:h-7 md:w-7 text-primary shrink-0"}),(0,t.jsx)("span",{className:"truncate break-all",children:r.spec.names.kind})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto mt-1 md:mt-0 flex-wrap sm:flex-nowrap",children:[(0,t.jsx)(h.$,{className:"flex-1 sm:flex-none",size:"sm",onClick:j,disabled:b.isLoading||!x,title:x?"Ask AI for insights on this CRD.":"AI features are not enabled by the server.",children:b.isLoading?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{className:"mr-2 h-3 w-3 md:h-4 md:w-4 animate-spin"}),"Thinking..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.A,{className:"mr-2 h-3 w-3 md:h-4 md:w-4"}),b.response?"Ask Again":"Ask AI"]})}),(0,t.jsx)("a",{href:"/instances?crdName=".concat(r.metadata.name).concat(i?"&cluster=".concat(i):""),className:"flex-1 sm:flex-none",children:(0,t.jsxs)(h.$,{variant:"outline",className:"w-full",size:"sm",children:[(0,t.jsx)(P.A,{className:"mr-2 h-3 w-3 md:h-4 md:w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"View"})," Instances"]})})]})]}),(0,t.jsx)(d.BT,{className:"pt-1 md:pl-[calc(1.75rem+0.75rem)] break-all text-xs md:text-sm leading-relaxed",children:r.metadata.name})]}),(0,t.jsxs)(d.Wu,{className:"p-3 md:p-6 w-full max-w-full",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)(d.Zp,{className:"p-4 bg-background/50 border-border/50",children:[(0,t.jsxs)("h3",{className:"font-semibold text-sm text-foreground mb-3 flex items-center gap-2",children:[(0,t.jsx)(_.A,{className:"h-4 w-4 text-primary"}),"Resource Information"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Group"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:r.spec.group||"Core"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Scope"}),(0,t.jsx)(f.E,{variant:"secondary",className:"text-xs",children:r.spec.scope})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Kind"}),(0,t.jsx)("span",{className:"text-sm font-medium font-mono",children:r.spec.names.kind})]})]})]}),(0,t.jsxs)(d.Zp,{className:"p-4 bg-background/50 border-border/50",children:[(0,t.jsxs)("h3",{className:"font-semibold text-sm text-foreground mb-3 flex items-center gap-2",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 text-primary"}),"Usage Statistics"]}),(0,t.jsxs)("div",{className:"space-y-3",children:["number"==typeof r.instanceCount&&(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active Instances"}),(0,t.jsx)(f.E,{variant:r.instanceCount>0?"default":"outline",className:(0,u.cn)("font-medium",r.instanceCount>0?"bg-success/10 text-success":"bg-muted text-muted-foreground"),children:r.instanceCount})]}),(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Versions"}),(0,t.jsx)("div",{className:"flex gap-1 flex-wrap max-w-32",children:r.spec.versions.map(e=>(0,t.jsx)(f.E,{variant:e.storage?"default":"outline",className:"text-xs",children:e.name},e.name))})]})]})]})]}),r.spec.names.shortNames&&r.spec.names.shortNames.length>0&&(0,t.jsxs)(d.Zp,{className:"p-4 bg-background/50 border-border/50 mb-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm text-foreground mb-3",children:"Short Names"}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:r.spec.names.shortNames.map(e=>(0,t.jsx)(f.E,{variant:"outline",className:"font-mono text-xs bg-primary/5",children:e},e))})]}),(b.isLoading||b.error||b.response)&&(0,t.jsxs)("div",{className:"mb-6 w-full max-w-full overflow-hidden",children:[b.isLoading&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-3/4 animate-pulse"}),(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-1/2 animate-pulse"}),(0,t.jsx)("div",{className:"h-24 bg-muted rounded w-full animate-pulse mt-6"})]}),b.error&&(0,t.jsxs)("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-md text-sm text-destructive flex items-start gap-3",children:[(0,t.jsx)(V.A,{className:"h-5 w-5 mt-0.5 shrink-0"}),(0,t.jsxs)("div",{className:"break-words",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Error"}),(0,t.jsx)("p",{className:"mt-1",children:b.error})]})]}),b.response&&(0,t.jsx)(M,{response:b.response})]}),(0,t.jsxs)(v,{type:"single",collapsible:!0,defaultValue:"schema",className:"w-full",children:[(0,t.jsxs)(y,{value:"schema",children:[(0,t.jsxs)(k,{className:"text-base md:text-lg font-semibold font-headline text-left",children:["Schema Definition (",g.name,")"]}),(0,t.jsx)(C,{className:"max-w-full overflow-hidden p-0",children:(0,t.jsx)(q,{schema:null==(s=g.schema)?void 0:s.openAPIV3Schema})})]}),(0,t.jsxs)(y,{value:"raw",children:[(0,t.jsx)(k,{className:"text-base md:text-lg font-semibold font-headline",children:"Raw Definition"}),(0,t.jsx)(C,{children:(0,t.jsx)("div",{className:"bg-muted p-2 md:p-4 rounded-md overflow-hidden max-w-full",children:(0,t.jsx)("pre",{className:"text-xs whitespace-pre-wrap overflow-x-auto break-all md:break-words",children:JSON.stringify(r,null,2)})})})]})]})]})]})})})},r.metadata.name)}var K=r(449),Q=r(39315),G=r(74233),H=r(82286);let W=H.bL,Y=H.l9,ee=a.forwardRef((e,s)=>{let{className:r,align:a="center",sideOffset:l=4,...n}=e;return(0,t.jsx)(H.ZL,{children:(0,t.jsx)(H.UC,{ref:s,align:a,sideOffset:l,className:(0,u.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})})});ee.displayName=H.UC.displayName;var es=r(50457),er=r(11186),et=r(52619),ea=r.n(et);function el(){let{clusters:e,selectedCluster:s,allCrds:r,clusterInfo:l,isLoading:n,selectCluster:d,refreshCrds:i}=(0,b.q)(),[o,c]=(0,a.useState)(null),[m,x]=(0,a.useState)(""),[p,j]=(0,a.useState)("list");(0,a.useEffect)(()=>{c(null)},[s]);let N=r.filter(e=>e.metadata.name.toLowerCase().includes(m.toLowerCase()));return(0,t.jsxs)("div",{className:"flex h-screen bg-background text-foreground overflow-hidden",children:[(0,t.jsxs)("div",{className:(0,u.cn)("w-full md:w-1/3 border-r border-border/50 flex flex-col h-full bg-card/30 backdrop-blur-sm","md:flex shadow-md overflow-hidden","list"===p?"flex":"hidden"),children:[(0,t.jsxs)("header",{className:"flex-shrink-0 border-b border-border/50 bg-card/50 backdrop-blur-md",children:[(0,t.jsxs)("div",{className:"p-3 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary/10 rounded-xl shrink-0",children:(0,t.jsx)(Q.gu,{className:"w-6 h-6 text-primary"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h1",{className:"text-lg font-bold font-headline text-foreground truncate",children:"CRD Wizard"}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground hidden sm:block",children:"Kubernetes Resource Explorer"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 shrink-0",children:[(0,t.jsxs)(W,{children:[(0,t.jsx)(Y,{asChild:!0,children:(0,t.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-primary/10 transition-colors",children:(0,t.jsx)(G.Q9E,{className:"h-4 w-4"})})}),(0,t.jsx)(ee,{align:"end",className:"w-72 p-4 animate-fade-in",children:(0,t.jsx)("div",{className:"space-y-3",children:l?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,t.jsx)(es.tev,{className:"w-5 h-5 text-primary"}),"Cluster Information"]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Cluster:"})," ",l.clusterName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Version:"})," ",l.serverVersion]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("strong",{children:"CRDs:"}),(0,t.jsxs)(f.E,{variant:"secondary",className:"text-xs",children:[l.numCRDs," resources"]})]})]})]}):(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Unable to fetch cluster information"})})})})]}),(0,t.jsx)(h.$,{variant:"ghost",size:"icon",onClick:()=>i(),disabled:n,className:"h-8 w-8 hover:bg-primary/10 transition-colors",title:"Refresh",children:(0,t.jsx)(G.Vt$,{className:(0,u.cn)("h-4 w-4 transition-all duration-300",n?"animate-spin":"hover:rotate-90")})}),(0,t.jsx)(ea(),{href:"/generator",children:(0,t.jsx)(h.$,{variant:"ghost",size:"icon",title:"Documentation Generator",className:"h-8 w-8 hover:bg-primary/10 transition-colors",children:(0,t.jsx)(G.D1l,{className:"h-4 w-4"})})}),(0,t.jsx)(K.U,{})]})]}),e.length>1&&(0,t.jsx)("div",{className:"px-3 pb-3",children:(0,t.jsxs)(er.l6,{value:s,onValueChange:e=>{d(e)},children:[(0,t.jsx)(er.bq,{className:"w-full h-9 text-sm border-border/50 bg-background/60",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,t.jsx)(es.tev,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground"}),(0,t.jsx)("span",{className:"truncate",children:(0,t.jsx)(er.yv,{placeholder:"Select cluster"})})]})}),(0,t.jsx)(er.gC,{children:e.map(e=>(0,t.jsx)(er.eb,{value:e.name,className:"text-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"truncate",children:e.name}),e.isCurrent&&(0,t.jsx)(f.E,{variant:"outline",className:"text-[10px] h-4 px-1",children:"default"})]})},e.name))})]})})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0",children:(0,t.jsx)(g,{crds:N,searchTerm:m,setSearchTerm:x,selectedCrd:o,onCrdSelect:e=>{c(e),j("detail")},isLoading:n})})]}),(0,t.jsx)("main",{className:(0,u.cn)("w-full md:w-2/3 h-full overflow-y-auto bg-gradient-to-br from-background via-background to-muted/20","md:block relative","detail"===p?"block":"hidden"),children:(0,t.jsx)(X,{crd:o,onBack:()=>{j("list")},selectedCluster:s})})]})}}},e=>{e.O(0,[206,362,166,793,985,184,874,105,202,627,441,255,358],()=>e(e.s=34236)),_N_E=e.O()}]);